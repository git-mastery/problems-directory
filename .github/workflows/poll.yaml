name: Poll for Git Mastery problem sets

on:
  workflow_dispatch:

  schedule:
    - cron: "0 12 * * *"

jobs:
  poll:
    runs-on: ubuntu-latest
    steps:
      - name: Get current problems directory
        uses: actions/checkout@v4
      - name: List directories
        run: |
          ls
          pwd
          touch hello.txt
          ls
          git status
          git add .
          git commit -m "Test commit"
          git push -u origin main
      - name: Fetch all
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.ORG_PAT }}
          script: |
            const repos = await github.paginate(github.rest.search.repos, {
              q: "topic:problem-set org:git-mastery",
            })
